# Система управління нотаріальною конторою

Веб-система для автоматизації роботи нотаріальної контори на PHP + MySQL (без використання JavaScript).

## Технології

- **Backend**: PHP 8.x
- **Frontend**: HTML5 + CSS3 (без JavaScript)
- **БД**: MySQL 8.x / MariaDB
- **Веб-сервер**: Apache 2.4 з mod_rewrite
- **Архітектура**: MVC (власна реалізація)

## Встановлення та запуск в XAMPP

### 1. Встановити XAMPP

Завантажте та встановіть XAMPP з офіційного сайту:
https://www.apachefriends.org/

### 2. Підготувати проєкт

1. Скопіюйте папку проєкту `coursework2` в директорію `C:\xampp\htdocs\`

   Після копіювання шлях має бути: `C:\xampp\htdocs\coursework2\`

### 3. Налаштувати Apache

1. Запустіть **XAMPP Control Panel**
2. Натисніть кнопку **Config** біля Apache
3. Оберіть **Apache (httpd.conf)**
4. Знайдіть рядок з `LoadModule rewrite_module` та переконайтеся, що він не закоментований:
   ```
   LoadModule rewrite_module modules/mod_rewrite.so
   ```
5. Знайдіть секцію `<Directory "C:/xampp/htdocs">` та змініть:
   ```
   AllowOverride None
   ```
   на:
   ```
   AllowOverride All
   ```
6. Збережіть файл та перезапустіть Apache

### 4. Створити базу даних

1. Запустіть **Apache** та **MySQL** в XAMPP Control Panel
2. Відкрийте браузер та перейдіть на http://localhost/phpmyadmin
3. Натисніть на вкладку **SQL**
4. Скопіюйте вміст файлу `data/schema.sql` та вставте в поле SQL-запиту
5. Натисніть кнопку **Виконати** (або **Go**)
6. База даних `notary_office` буде створена автоматично разом з усіма таблицями

### 5. Налаштувати конфігурацію

Відкрийте файл `config/config.php` та перевірте налаштування підключення до БД:

```php
define('DB_HOST', 'localhost');
define('DB_NAME', 'notary_office');
define('DB_USER', 'root');
define('DB_PASS', '');  // За замовчуванням в XAMPP пароль пустий
```

Також перевірте BASE_URL:

```php
define('BASE_URL', 'http://localhost/coursework2/public');
```

### 6. Встановити права доступу

Переконайтеся, що папка `public/uploads/documents` має права на запис.

У Windows це зазвичай працює автоматично, але якщо виникають проблеми:

- Клацніть правою кнопкою на папці `public/uploads`
- Оберіть **Властивості → Безпека**
- Надайте повний доступ для користувачів

### 7. Запустити систему

1. Переконайтеся, що Apache та MySQL запущені в XAMPP Control Panel
2. Відкрийте браузер та перейдіть на:
   ```
   http://localhost/coursework2/public
   ```
3. Ви побачите сторінку входу

### 8. Увійти в систему

**Дані для входу адміністратора:**

- Логін: `admin`
- Пароль: `admin123`

## Структура проєкту

```
coursework2/
├── app/
│   ├── Controllers/       # Контролери (обробка запитів)
│   ├── Models/           # Моделі (робота з БД)
│   └── Views/            # Представлення (HTML-шаблони)
│       ├── layouts/      # Загальні шаблони
│       ├── auth/         # Сторінки авторизації
│       ├── home/         # Головна сторінка
│       ├── clients/      # Клієнти
│       ├── notaries/     # Нотаріуси
│       ├── offices/      # Офіси
│       ├── services/     # Послуги
│       ├── cases/        # Справи
│       ├── documents/    # Документи
│       └── payments/     # Платежі
├── config/               # Конфігурація
│   ├── config.php       # Основні налаштування
│   ├── database.php     # Підключення до БД
│   └── router.php       # Маршрутизація
├── data/                 # Дані
│   ├── schema.sql       # Схема бази даних
│   └── tz.md            # Технічне завдання
├── public/               # Публічна директорія (DocumentRoot)
│   ├── index.php        # Точка входу
│   ├── .htaccess        # Налаштування Apache
│   ├── css/             # Стилі
│   └── uploads/         # Завантажені файли
└── storage/              # Логи та інше
    └── logs/
```

## Функціональні можливості

### Для адміністратора

- ✅ Управління офісами
- ✅ Управління нотаріусами
- ✅ Управління послугами
- ✅ Перегляд статистики
- ✅ Доступ до всіх справ та платежів

### Для нотаріуса

- ✅ Перегляд власних справ
- ✅ Зміна статусу справ
- ✅ Завантаження документів
- ✅ Перегляд платежів по справах

### Для працівника приймальні

- ✅ Реєстрація клієнтів
- ✅ Створення справ
- ✅ Створення платежів
- ✅ Друк квитанцій

### Для бухгалтера

- ✅ Перегляд усіх платежів
- ✅ Фільтрація платежів
- ✅ Формування звітів

## Основні маршрути

- `/` - Головна сторінка
- `/login` - Вхід в систему
- `/clients` - Список клієнтів
- `/clients/create` - Створення клієнта
- `/notaries` - Список нотаріусів
- `/offices` - Список офісів
- `/services` - Список послуг
- `/cases` - Список справ
- `/cases/create` - Створення справи
- `/payments` - Список платежів

## Безпека

Система включає:

- ✅ Хешування паролів (password_hash)
- ✅ Захист від CSRF-атак
- ✅ Захист від SQL-ін'єкцій (PDO prepared statements)
- ✅ Захист від XSS (htmlspecialchars)
- ✅ Контроль доступу за ролями
- ✅ Валідація даних на сервері

## Вимоги до системи

- PHP 8.0 або вище
- MySQL 8.0 / MariaDB 10.3 або вище
- Apache 2.4 з mod_rewrite
- Мінімум 128 MB RAM
- 100 MB вільного місця на диску

## Налагодження помилок

### Помилка 404 при переході на сторінки

**Рішення:**

1. Перевірте, чи файл `.htaccess` присутній в папці `public/`
2. Переконайтеся, що `mod_rewrite` включений в Apache
3. Перевірте, що `AllowOverride All` встановлено в `httpd.conf`

### Помилка підключення до БД

**Рішення:**

1. Переконайтеся, що MySQL запущений в XAMPP
2. Перевірте дані підключення в `config/config.php`
3. Переконайтеся, що база даних `notary_office` створена

### Помилка завантаження файлів

**Рішення:**

1. Перевірте права доступу на папку `public/uploads/`
2. Перевірте налаштування `upload_max_filesize` в `php.ini`

### Біла сторінка (без помилок)

**Рішення:**

1. Увімкніть відображення помилок в `config/config.php`:
   ```php
   error_reporting(E_ALL);
   ini_set('display_errors', 1);
   ```
2. Перевірте логи Apache: `C:\xampp\apache\logs\error.log`

## Тестові дані

Після встановлення системи буде створений один користувач-адміністратор:

**Логін:** admin  
**Пароль:** admin123

Для повноцінної роботи рекомендується:

1. Створити офіс
2. Створити нотаріуса
3. Створити послуги
4. Створити клієнтів
5. Створити справи

## Підтримка та розробка

Для додавання нових функцій дотримуйтесь MVC-архітектури:

1. **Model** - логіка роботи з даними (`app/Models/`)
2. **Controller** - обробка запитів (`app/Controllers/`)
3. **View** - відображення даних (`app/Views/`)

## Автор

Курсова робота з розробки веб-системи управління нотаріальною конторою.

## Ліцензія

Проєкт створено в навчальних цілях.
